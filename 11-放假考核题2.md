## 实现queryURLParams

> ```js
> let url = "http://www.zhufengpeixun.cn/?lx=1&from=wx#video";
> console.log(queryURLParams(url, 'from'));
> console.log(queryURLParams(url, '_HASH'));
> console.log(queryURLParams(url));
> ```

### 1、全原生实现

```js
let queryURLParams1 = function (url, key) {
  let askIndex = url.indexOf('?');
  let polIndex = url.indexOf('#');
  let askText = '';
  let polText = '';
  polIndex === -1 ? polIndex = url.length : null;
  polText = url.substring(polIndex + 1);
  askIndex > -1 ? askText = url.substring(askIndex + 1, polIndex) : null;
  let obj = {};
  polText ? obj['_HASH'] = polText : null;
  if (askText) {
    askText.split('&').forEach(item => {
      let [k, v] = item.split('=');
      obj[k] = v
    })
  }
  return typeof key === "undefined" ? obj : obj[key]
}
```



### 2、利用`a`标签优化`polText`、`askText`

```js
let queryURLParams2 = function (url, key) {
  let link = document.createElement('a')
  link.href = url;
  let askText = link.search.substring(1);
  let polText = link.hash.substring(1);
  link = null;
  let obj = {};
  polText ? obj['_HASH'] = polText : null;
  if (askText) {
    let arr = askText.split(/(?:&|=)/g)
    for (let i = 0; i < arr.length; i += 2) {
      const k = arr[i];
      const v = arr[i + 1];
      k ? obj[k] = v : null
    }
  }
  return typeof key === "undefined" ? obj : obj[key]
}
```



### 3、利用正则优化`split`分组

```js
let queryURLParams3 = function (url, key) {
  let askIndex = url.indexOf('?');
  let polIndex = url.indexOf('#');
  let askText = '';
  let polText = '';
  polIndex === -1 ? polIndex = url.length : null;
  polText = url.substring(polIndex + 1);
  askIndex > -1 ? askText = url.substring(askIndex + 1, polIndex) : null;
  let obj = {};
  polText ? obj['_HASH'] = polText : null;
  if (askText) {
    let arr = askText.split(/(?:&|=)/g)
    for (let i = 0; i < arr.length; i += 2) {
      const k = arr[i];
      const v = arr[i + 1];
      k ? obj[k] = v : null
    }
  }
  return typeof key === "undefined" ? obj : obj[key]
}
```



### 4、正则最终方案

```js
let queryURLParams4 = function (url, key) {
  let obj = {}
  url.replace(/([^?&=#]+)=([^?&=#]+)/g, (_, $1, $2) => obj[$1] = $2)
  url.replace(/#([^?&=#]+)/g, (_, $1) => obj['_HASH'] = $1)
  return typeof key === "undefined" ? obj : obj[key]
}
```



## 柯里化

### 1、低配版本

```js
let fn = (...outArgs) => (...innerArgs) => outArgs.concat(innerArgs).reduce((total, item) => total + item, 0)
console.log(fn(1, 2)(3));
```



### 2、高配版本

```js
function currying(func, ...args1) {
  return (...args2) => {
    let args = [...args1, ...args2]
    if (args.length === func.length) {
      return func(...args)
    } else {
      return add(func, ...args)
    }
  }
}
function add(a, b, c, d) {
  return a + b + c + d
}
let newAdd1 = currying(add, 0)
console.log(newAdd1(1, 2, 3));
let newAdd2 = currying(add, 0, 2)
console.log(newAdd2(4, 6));
```

