### 函数作用域链和私有上下文

> 1. `形成`一个全新的`私有上下文（EC(FN)）`，供代码执行
> 2. 进`栈`执行
>    + 把全局上下文放到栈的`底部`
>    + 把新的上下文放到栈的`顶部`
> 3. 创建一个`私有变量对象(AO(FN))`
> 4. 初始化作用域链`(scopeChain)`
>    - 作用域链组成：`<自己的私有上下文,自己的作用域（创建函数的时候的作用域，也就是scope）>`，如`<EC(FN)，EC(G)>`，始终存在链首部为自己的私有上下文，链尾为全局上下文
>    - 作用域链作用：`在私有上下文执行时`，私有上下文的属性和方法**优先**，如果未找到会一直沿着作用域查找，直到`EC(G)`，如果还未找到，则报错`undefined`
> 5. 初始化`this`指向
> 6. 初始化实参集合（`arguments`）
> 7. 形参赋值
>    - 形参赋值后的对象也会放到自己的私有变量对象`AO(FN)`中
>    - 就算没有定义形参，实参也能通过`arguments`传递进来
> 8. 变量提升
> 9. 代码执行
> 10. 出`栈`

![作用域链和私有上下文](https://cdn.jsdelivr.net/gh/zangguojun/PicGo/20210530152108.png)

